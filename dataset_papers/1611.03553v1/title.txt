The Sum-Product Theorem: A Foundation for Learning Tractable Models
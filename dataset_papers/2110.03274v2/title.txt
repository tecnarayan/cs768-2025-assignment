Three Operator Splitting with Subgradients, Stochastic Gradients, and Adaptive Learning Rates
Adaptive SGD with Polyak stepsize and Line-search: Robust Convergence and Variance Reduction